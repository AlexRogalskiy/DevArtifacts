jQuery(document).ready(function($){function e(e,i,n){var s=e.children(".active");if("next"==i)var t=s.next();else if("prev"==i)var t=s.prev();else var t=e.children("li").eq(n);s.removeClass("active"),t.addClass("active")}function n(i,n,s){var t=0,l=i.children(".slider-dots"),r=6*Number(i.find(".cd-slider-content").eq(0).css("margin-right").replace("px","")),o=window.innerWidth;if(o="desktop"==C?o-r:o,i.children(".sub-slides").length>0){var a=i.children(".sub-slides"),d=a.children(".sub-visible");if(0==d.length&&(d=a.children("li").eq(0).addClass("sub-visible")),"nav"==n)var v=s;else var v="next"==n?d.next():d.prev();if(v.length>0){var u=v.index();t=parseInt(-u*o),c(a.get(0),"translateX",t+"px"),e(l,n,u),d.removeClass("sub-visible"),v.addClass("sub-visible")}}}function s(e,i){var n=h.filter(".visible"),s=n.find(".cd-slider-content").length>0?3*Number(n.find(".cd-slider-content").eq(0).css("margin-bottom").replace("px","")):0,t=v(f.get(0),"Y");if("nav"==e)var l=i;else var l="next"==e?n.next():n.prev();if(l.length>0){$(window).off("DOMMouseScroll mousewheel",r);var o=parseInt(-l.offset().top+t+s);o>0&&(o=0),c(f.get(0),"translateY",o+"px"),n.removeClass("visible"),l.addClass("visible"),0==l.find(".sub-visible").length&&l.find(".sub-slides").children("li").eq("0").addClass("sub-visible")}}function t(){C=u(f.get(0)),o(C,x),"mobile"==C?(x=!0,f.attr("style","").children(".visible").removeClass("visible")):(x=!1,0==h.filter(".visible").length&&h.eq(0).addClass("visible"),s("nav",h.filter(".visible"))),d(f),w=!1}function l(e){return e.originalEvent.detail<0||e.originalEvent.wheelDelta>0?(b--,Math.abs(b)>=m&&s("prev")):(b++,b>=m&&s("next")),g=!1,!1}function r(e){g||(window.requestAnimationFrame?window.requestAnimationFrame(function(){l(e)}):l(e),g=!0)}function o(e,i){"desktop"==e&&i?($(window).on("DOMMouseScroll mousewheel",r),$(document).on("keydown",function(e){if("40"==e.which)e.preventDefault(),s("next");else if("38"==e.which)e.preventDefault(),s("prev");else if("39"==e.which){var i=h.filter(".visible");n(i,"next")}else if("37"==e.which){var i=h.filter(".visible");n(i,"prev")}})):"mobile"==e&&($(window).off("DOMMouseScroll mousewheel",r),$(document).off("keydown"))}function a(e,n){if(0==e.find(".slider-dots").length){var s=$('<ol class="slider-dots"></ol>').appendTo(e);for(i=0;i<n;i++){var t=$(0==i?'<li class="active"></li>':"<li></li>");t.appendTo(s)}}}function d(e){var i=window.innerWidth;e.children("li").each(function(){var e=$(this),s=e.children(".sub-slides").children("li").length,t=s*i;if(t=0==t?i:t,e.css("width",t+"px"),s>0){var l=e.find(".sub-visible");0==l.length&&(l=e.find("li").eq(0),l.addClass("sub-visible")),n(e,"nav",l),a(e,s)}})}function v(e,i){var n=window.getComputedStyle(e,null),s=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");if(s.indexOf("(")>=0){s=s.split("(")[1],s=s.split(")")[0],s=s.split(",");var t="X"==i?s[4]:s[5]}else var t=0;return Number(t)}function c(e,i,n){e.style["-webkit-transform"]=i+"("+n+")",e.style["-moz-transform"]=i+"("+n+")",e.style["-ms-transform"]=i+"("+n+")",e.style["-o-transform"]=i+"("+n+")",e.style.transform=i+"("+n+")",$(e).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){"desktop"==C&&(b=0,$(window).on("DOMMouseScroll mousewheel",r))})}function u(e){var i=window.getComputedStyle(e,"::before").getPropertyValue("content").replace(/["']/g,"");return i}var f=$(".cd-slideshow"),h=f.children("li"),p=$(".cd-slideshow-nav"),b=0,m=6,w=!1,g=!1,C=u(f.get(0)),x=!1;o(C,!0),d(f),h.on("swipeleft",function(e){"mobile"==C&&n($(this),"next")}),h.on("swiperight",function(e){"mobile"==C&&n($(this),"prev")}),h.on("click",function(e){var i=$(this);if("desktop"!=C||i.hasClass("visible")){if("desktop"==C&&0==$(e.target).parents(".sub-visible").length&&$(e.target).parents(".sub-slides").length>0){var t=$(e.target).parents(".cd-slider-content").parent("li"),l=t.prev(".sub-visible").length>0?"next":"prev";n(i,l)}}else s("nav",i)}),p.on("click",".cd-nav-trigger",function(){p.hasClass("nav-open")&&"desktop"==C?$(window).on("DOMMouseScroll mousewheel",r):p.hasClass("nav-open")||"desktop"!=C||$(window).off("DOMMouseScroll mousewheel",r),p.toggleClass("nav-open")}),p.on("click","a",function(i){var t=$(i.target),l=t.parents(".sub-nav").length>0,o=l?t.parents(".sub-nav").parent("li").index():t.parent("li").index(),a=h.eq(o);if(f.addClass("remove-transitions"),p.removeClass("nav-open").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){f.removeClass("remove-transitions")}),"desktop"==C&&(i.preventDefault(),s("nav",a),$(window).on("DOMMouseScroll mousewheel",r)),l){var d=t.parent("li").index()+1,v=a.children(".sub-slides").children("li").eq(d);n(a,"nav",v)}else a.children(".sub-slides").attr("style","").children("li.sub-visible").removeClass("sub-visible").end().children("li").eq(0).addClass("sub-visible"),e(a.children(".slider-dots"),"nav",0)}),$(window).on("resize",function(){w||(window.requestAnimationFrame?window.requestAnimationFrame(t):t(),w=!0)})});