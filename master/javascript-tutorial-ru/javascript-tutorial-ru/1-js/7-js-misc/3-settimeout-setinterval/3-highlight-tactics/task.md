importance: 5

---

# Для подсветки setInterval или setTimeout?

Стоит задача: реализовать подсветку синтаксиса в длинном коде при помощи JavaScript, для онлайн-редактора кода. Это требует сложных вычислений, особенно загружает процессор генерация дополнительных элементов страницы, визуально осуществляющих подсветку.

Поэтому решаем обрабатывать не весь код сразу, что привело бы к зависанию скрипта, а разбить работу на части: подсвечивать по 20 строк раз в 10 мс.

Как мы знаем, есть два варианта реализации такой подсветки:

1. Через `setInterval`, с остановкой по окончании работы:

    ```js
    timer = setInterval(function() {
      if (есть еще что подсветить) highlight();
      else clearInterval(timer);
    }, 10);
    ```
2. Через рекурсивный `setTimeout`:

    ```js
    setTimeout(function go() {
      highlight();
      if (есть еще что подсветить) setTimeout(go, 10);
    }, 10);
    ```

Какой из них стоит использовать? Почему?