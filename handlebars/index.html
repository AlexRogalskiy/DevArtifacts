<!DOCTYPE html>
<!--
 ! Excerpted from "Web Development Recipes",
 ! published by The Pragmatic Bookshelf.
 ! Copyrights apply to this code. It may not be used to create training material, 
 ! courses, books, articles, and the like. Contact us if you are in doubt.
 ! We make no guarantees that this code is fit for any purpose. 
 ! Visit http://www.pragmaticprogrammer.com/titles/wbdev2 for more book information.
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>List Products</title>
  </head>
  <body>
    <script type="text/x-handlebars-template" id="products_template">
    {{#products}}
      <div class="product">
        <h2>
          <span class="product-name">{{name}}</span>
          <em class="product-price">{{price}}</em>
        </h2>
        {{#if description}}
          <div class="product-description">{{description}}</div>
        {{/if}}
      </div>
    {{/products}}
    </script>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js">
    </script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/
                 handlebars.min.js"></script>
    <script>
      (function(){
        $.getJSON('/products.json', function(products) {
          var data = {products: products};
          var template = Handlebars.compile($("#products_template").html());
          var html = template(data);
          $("body").append(html);
        });
      })();
    </script>
  </body>
</html>
